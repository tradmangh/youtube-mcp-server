# Improved Transcript Feature

## Overview

The `get_transcript` function provides enhanced transcript access with text normalization, making it ideal for LLM summarization and content analysis.

## Usage

### Basic Usage

```javascript
// Using the MCP tool
{
  "tool": "get_transcript",
  "arguments": {
    "videoId": "dQw4w9WgXcQ"
  }
}
```

### With Language Preference

```javascript
{
  "tool": "get_transcript",
  "arguments": {
    "videoId": "dQw4w9WgXcQ",
    "preferAutoGenerated": false  // Prefers official captions (default)
  }
}
```

## Output Format

The function returns:

```json
{
  "videoId": "dQw4w9WgXcQ",
  "language": "en",
  "plainText": "Clean, normalized transcript text suitable for LLM processing...",
  "timestampedSegments": [
    {
      "timestamp": "0:00",
      "text": "First segment text"
    },
    {
      "timestamp": "0:05",
      "text": "Second segment text"
    }
  ],
  "segmentCount": 150
}
```

## Key Features

### 1. Text Normalization
- HTML entities are decoded (`&amp;` → `&`, `&quot;` → `"`)
- Multiple spaces are collapsed into single spaces
- Line breaks are normalized
- Text is trimmed and cleaned

### 2. Dual Output Formats
- **plainText**: A single, continuous string of normalized text - perfect for feeding to LLMs
- **timestampedSegments**: An array of timestamped text segments for reference

### 3. Enhanced Error Handling
- **No transcripts available**: `"Transcripts are not available for video {id}. The video may not have captions enabled."`
- **Language not available**: `"No transcript available in language '{lang}' for video {id}. {available languages}"`
- **Video unavailable**: `"Video {id} is unavailable or does not exist."`
- **Transcripts disabled**: `"Transcripts are disabled for video {id}."`

## Examples

### Example 1: Summarizing a Video

```javascript
// Get transcript
const result = await get_transcript({ videoId: "dQw4w9WgXcQ" });

// Use plainText for LLM summarization
const summary = await llm.summarize(result.plainText);
```

### Example 2: Finding Specific Content

```javascript
// Get transcript with timestamps
const result = await get_transcript({ videoId: "dQw4w9WgXcQ" });

// Search for specific content
const relevantSegments = result.timestampedSegments.filter(
  segment => segment.text.includes("important keyword")
);

console.log(`Found at: ${relevantSegments[0].timestamp}`);
```

## Differences from Original `transcripts_getTranscript`

| Feature | Original | Improved (`get_transcript`) |
|---------|----------|----------------------------|
| Text normalization | No | Yes - HTML entities, spacing, line breaks |
| Plain text output | No | Yes - single continuous string |
| Timestamped segments | Raw format | Human-readable format (MM:SS) |
| Error messages | Generic | Specific, actionable messages |
| LLM-ready output | No | Yes - optimized for summarization |

## Notes

- The underlying `youtube-transcript` library automatically prefers official captions over auto-generated ones
- The `preferAutoGenerated` parameter is included for future extensibility but currently doesn't change behavior
- The function works with any publicly available YouTube video that has captions enabled
- No YouTube API key is required for transcript access
